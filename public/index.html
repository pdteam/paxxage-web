<!DOCTYPE html>
<html lang="en">
  <head>
    <title>Paxxage - Simple Cryptographic Studio</title>
    <meta name="og:title" property="og:title" content="Paxxage brings you simple cryptographic privacy and security.">
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">
    <meta name="keywords" content="Cryptography, tools, browser, encryption, toolset, Symaiotics, Node.js, Forge, OpenSSL, Electron.js, Vue, JavaScript">
    <meta name="description" content="Paxxage provides a cryptographic toolset for login, file and message sharing, and identity verification.">
    <meta name="author" content="Symaiotics Corporation">
    <link rel="stylesheet" href="./css/bulma/bulma.min.css">
    <link rel="stylesheet" href="./css/fa-all.css">
    <!-- <link rel="stylesheet" href="./css/buefy.min.css"> -->
<style>
/* Style Overrides */

.navbar-burger
{
  position:absolute;
  right:0px;
}

</style>

    <link rel="icon" href="favicon.ico">
    <script src="js/main.js"></script>
  </head>
  <body>


    <div id="app">  <!-- Start of Vue App-->
    <div class=" splash-back ">
                
      <nav class="navbar"><div class="container">
          <div class="navbar-brand" style = "width:150px">
            <img src="img/paxxageLogo.svg"  style = "height:50px;margin:2px 0 2px 5px" alt=""> 
            
            <a class="navbar-item" href="#" style = "color:#191654;font-weight:600;">Paxxage</a><a class="navbar-burger" role="button" aria-label="menu" aria-expanded="false"><span aria-hidden="true"></span><span aria-hidden="true"></span><span aria-hidden="true"></span></a></div>
          <div class="navbar-menu">
            <div class="navbar-start">

             
              <a class="navbar-item" href="#generate">Generate Keys</a>
              <a class="navbar-item" href="#sign">Sign</a>
              <a class="navbar-item" href="#verify">Verify</a>
              <a class="navbar-item" href="#encrypt">Encrypt</a>
              <a class="navbar-item" href="#decrypt">Decrypt</a>
              <a class="navbar-item" href="signin.html">Demo</a>
              <a class="navbar-item" href="#about">About</a>
              <!-- <a class="navbar-item" href="service.html">Service API</a> -->
            </div>
            <div class="navbar-end">
              <div class="navbar-item">

                <div class="buttons"><a class="button is-primary" href="desktop.html">Desktop Version</a></div>

                <!-- <input class="input" type="text" placeholder="Search"></div> -->
            </div>
          </div>
        </div>
      </nav>
                
      <section id = "home" class="hero"><div class="hero-body">
          <div class="container">
            <div class="columns is-vcentered">
              <div class="column is-5 is-offset-1">
                <!-- <h2>{{message}}</h2> -->
                <h1 class="title ">Paxxage</h1>
                <p class="subtitle">Anonymous+secure toolset with RSA encryption.</p>
                <p> <b>Important: </b>Services on this site work completely offline. <br/>No data is stored or transmitted. <br/>No cookies are generated.<br/><br/><a href="https://github.com/symaiotics/paxxage-web">Get the source code to verify.</a></p>

              </div>
              <div class="column is-6">

                  <img src = "img/paxxage.svg" style = "margin-left:auto;margin-right:auto;width:100%;height:400px">
              </div>
            </div>
          </div>
        </div>
      </section>
    </div> <!-- End of Splash Back -->

    <div class="container is-fluid ">

      <section data-section-id="10" data-component-id="29e6_4_07_awz" data-category="how-it-works" class="section">
        <div class="container has-text-centered">
          <h2 class="title is-spaced" data-config-id="header">Stop! Be skeptical. Be safe. </h2>
          <div class="columns" data-config-id="how_07">
            <div class="column is-6 is-offset-3">
              <div class="level">
                <div class="level-item">
                  <figure class="image is-128x128"><img class="is-rounded" src="img/undraw_alert_mc7b.svg" alt=""></figure>
                </div>
              </div>
              <h4 class="title is-4">Never share your <b>private key</b> with sites you don't trust.</h4>
              <p>These web tools do not collect any data. But be ultra careful with your private keys. We make all our code available open source. These tools leverage <a href = ""https://github.com/digitalbazaar/forge>Forge</a>. The <a href = "desktop.html">Desktop Paxxage App</a> uses either Forge or <a href = "https://www.openssl.org/" target = "_blank">OpenSSL</a> to conduct all crypto functions. </p>
            </div>
          </div>
        </div>
      </section>

      <section id = "generate" data-section-id="14" data-component-id="29e6_12_04_awz" data-category="sign-in" class="section">
        <div class="container">
          <div class="columns  is-8">
            <div class="column is-5 is-offset-1">
              <h4 class="title is-4" data-config-id="header1">Generate a Key Pair</h4>
            
              <label>Key Strength</label>
                <div class="field ">
                  <div class="control is-expanded">
                    <select  v-model = "obGenerate.strength" class="input" >
                      <option value = "4096">4096-bit Encryption</option>
                      <option value = "8192">8192-bit Encryption</option>
                    </select>
                  </div>
                </div>
            
                <label>Protect your Key (optional).<br/><div v-if = "obGenerate.password.length && obGenerate.password.length < 16">Your password must be at least 16 characters. You have {{obGenerate.password.length}}.</div></label>
                <div class="field is-grouped">
                  <div class="control is-expanded">
                    <input class="input" type="text" v-model = "obGenerate.password" placeholder="Key password">
                  </div>

                  <div class="control">
                    <button @click = "generatePassword" class="button is-primary" type="submit">Random Password</button>
                  </div>

                </div>
                
                <div class="field" v-if="!obGenerate.password.length">
                  <div class="control">
                    <button @click = "generate" class="button is-primary is-fullwidth" data-config-id="signin">Generate without Password</button>
                  </div>
                </div>

                <div class="field" v-if ="obGenerate.password.length">
                  <div class="control">
                    <button :disabled = "obGenerate.password.length && obGenerate.password.length < 16" @click = "generate" class="button is-primary is-fullwidth" data-config-id="signin">Generate with Password</button>
                  </div>
                </div>
                

                <p>
                  Generation may take 10 seconds to <b>more than 1 minute</b> depending on the speed of your device and the key strength. For faster performance, switch to the Desktop version.
                  <br/><br/>Your browser will prompt you to allow multiple file downloads. Click 'Allow' as 2 keys are generated (private and public).
                </p>

                <div v-if ="obGenerate.password.length">
                  <p style = "color:red;font-weight:800;font-size:1em">Write down your password!</p>
                </div>

              </div>
            <div class="column is-6">
              <figure class="image is-128x128"><img class="is-rounded" src="img/undraw_safe_bnk7.svg" alt=""></figure>              
              <!-- <h4 class="title is-spaced is-4" data-config-id="header2">Verify a Signature</h4> -->
              <p class="subtitle" data-config-id="description">
                <a href = "https://en.wikipedia.org/wiki/RSA_(cryptosystem)" target = "_blank">Asymmetrical encryption runs the world.</a>
                <br/><br/>
                How it works:
                <ul class="block">
                  <li>• Select the strength of your key. Higher bits means higher security for the future but slightly slower performance each use.</li>
                  <li>• Add an optional password to protect your key. Make sure it is a strong password. We recommend generating a random password that you can securely record.</li>
                  <li>• Two files are generated, a private key and a public key. If you've given a password, the private key itself will be encryped.</li>
                  <li>• You keep the private key and never share it. It is used to decrypt files and prove your identity.</li>
                  <li>• Share the public key with anyone you like. It is used to encrypt files and verify identity.</li>
                  <li>• Your key pair can be used to login to services without a username or password.</li>
                  <li>• Your private key cannot be recovered if lost, so protect it.</li>
                  <li>• Your optional password cannot be recovered if lost.</li>
                </ul>
                
                </p>

               
                
              
            
            </div>
          </div>
        </div>
      </section>



      <section   id = "sign"  data-section-id="14" data-component-id="29e6_12_04_awz" data-category="sign-in" class="section">
        <div class="container">
          <div class="columns  is-8">
            <div class="column is-5 is-offset-1">
              <h4 class="title is-4" data-config-id="header1">Sign a Value</h4>
            
              <div class="field ">
                <label>Private Key</label>
                <div class="control is-expanded">
                  <textarea v-model = "obSign.privateKey" rows="3" style = "min-height:60px" class="input"  placeholder="Private key" required="required"></textarea>
                </div>
              </div>

              <div v-if = "obSign.privateKey.includes('ENCRYPTED')">Your key is encrypted, please enter the password.
              <label>Password<br/></label>
              <div class="field">
                <div class="control is-expanded">
                  <input class="input" type="text" v-model = "obSign.password" placeholder="Key password">
                </div>
              </div>
              </div>
              
              <div class="field ">
                <div class="control is-expanded">
                  <label>Value to Sign</label>
                  <input v-model = "obSign.originalValue" class="input" type="text" placeholder="Value to Sign" required="required">
                </div>
              </div>

              <div class="field ">
                <div class="control is-expanded">
                  <label>Signature</label>
                  <input disabled v-model = "obSign.signature64" class="input" type="text" placeholder="Generated Signature" required="required">
                </div>
              </div>


           
              <div class="field  ">
               

                <div class="control is-expanded">
                  <button @click = "sign" class="button is-primary is-fullwidth" type="submit">Generate Signature</button>
                </div>
              </div>

               
            </div>
            <div class="column is-6">
              <figure class="image is-128x128"><img class="is-rounded" src="img/undraw_confirmed_81ex.svg" alt=""></figure>              
             
              <p class="subtitle" data-config-id="description">
                <a href = "https://en.wikipedia.org/wiki/Digital_signature" target = "_blank">Your digital signature cannot be forged.</a>
                <br/><br/>
                How it works:
                <ul class="block">
                  <li>• Your private key can sign a short text value.</li>
                  <li>• Anyone with your public key can verify that the signature is authentic.</li>
                  <li>• This permits trusted transactions to begin, including secure username and password-free logins to compatible web services.</li>
                 
                </ul>
                
                </p>

               
                
              
              
            </div>
          </div>
        </div>
      </section>


      <section  id = "verify" data-section-id="14" data-component-id="29e6_12_04_awz" data-category="sign-in" class="section">
        <div class="container">
          <div class="columns  is-8">
            <div class="column is-5 is-offset-1">
              <h4 class="title is-4" data-config-id="header1">Verify a Signature</h4>
             
              <label>Public Key</label>
                <div class="field ">
                  <div class="control is-expanded">
                    <textarea v-model = "obVerify.publicKey" rows="3" style = "min-height:60px" class="input"  placeholder="Public key" required="required"></textarea>
                  </div>
                </div>
            
                <label>Unsigned Value</label>
                <div class="field">
                  <div class="control">
                    <input class="input" type="text" v-model = "obVerify.originalValue" placeholder="Unsigned value">
                  </div>
                </div>
                
                <label>Signed Value</label>
                <div class="field ">
                  <div class="control is-expanded">
                    <textarea v-model = "obVerify.signature64" rows="3" style = "min-height:60px" class="input"  placeholder="Signed value" required="required"></textarea>
                  </div>
                </div>                

                <label>Verification Results</label>
                <div class="field">
                  <div class="control">
                    <input class="input" disabled type="text" v-model = "obVerify.result" placeholder="Verification results">
                  </div>
                </div>

                <div class="field">
                  <div class="control">
                    <button @click = "verify" class="button is-primary is-fullwidth" data-config-id="signin">Verify</button>
                  </div>
                </div>
               
            </div>
            <div class="column is-6">
              <figure class="image is-128x128"><img class="is-rounded" src="img/undraw_Security_on_ff2u (1).svg" alt=""></figure>              
             
              <p class="subtitle" data-config-id="description">
                <a href = "https://en.wikipedia.org/wiki/Digital_signature" target = "_blank">Signature verification is used to positively identify someone.</a>
                
                <br/><br/>
                How it works:
                <ul>
                  <li>• The private key holder signs any value, like some text.</li>
                  <li>• Any public key holder can verify this signature is authentic.</li>
                  <li>• The <b>public key</b>, the <b>original value</b>, and the <b> signed value</b> are required for verification.</li>
                </ul>
                
                </p>

             
            </div>
          </div>
        </div>
      </section>




      <section  id = "encrypt"  data-section-id="14" data-component-id="29e6_12_04_awz" data-category="sign-in" class="section">
        <div class="container">
          <div class="columns  is-8">
            <div class="column is-5 is-offset-1">
              <h4 class="title is-4" data-config-id="header1">Encrypt a File</h4>
             
              <label>Public Key</label>
                <div class="field ">
                  <div class="control is-expanded">
                    <textarea v-model = "obEncrypt.publicKey" rows="3" style = "min-height:60px" class="input"  placeholder="Public key" required="required"></textarea>
                  </div>
                </div>
            

                <input type = "file" class = "input" v-model="encryptFiles" @change="encryptGetFile(event)"  />
               Select a file. Encryption happens in the browser. <b>Nothing is transmitted or saved.</b>

                <div class="field">
                  <div class="control">
                    <button @click = "encrypt" class="button is-primary is-fullwidth" data-config-id="signin">Encrypt and Download</button>
                  </div>
                </div>
               
            </div>
            <div class="column is-6">
              <figure class="image is-128x128"><img class="is-rounded" src="img/undraw_secure_data_0rwp.svg" alt=""></figure>              
             
              <p class="subtitle" data-config-id="description">
                <a href = "https://en.wikipedia.org/wiki/Advanced_Encryption_Standard" target = "_blank">Fast and easy encryption.</a>
                <br/><br/>
                How it works:
                <ul>
                  <li>• A file is loaded into the browser's memory. </li>
                  <li>• A special single use key for file encryption (known as an AES Key) is generated.</li>
                  <li>• The AES Key is used to encrypt the file. It takes about 1 second per megabyte of size. Larger files should use the Desktop App</li>
                  <li>• The public key then encrypts the AES Key and some details about the file (its original name, type, and size).
                  <li>• The encrypted AES Key file details are bundled together into a cipher.json file.</li>
                  <li>• The encrypted file is created as a .pxg file. It is saved in a Base64 format which will make it 35% larger than the unencrypted original file.</li>
                  <li>• Your system will download the cipher and the encrypted file.</li>
                  <li>• Both files are needed to decrypt the data later.</li>
                  
                
                </ul>
                
                </p>
 
            </div>
          </div>
        </div>
      </section>



      <section  id = "decrypt"  data-section-id="14" data-component-id="29e6_12_04_awz" data-category="sign-in" class="section">
        <div class="container">
          <div class="columns  is-8">
            <div class="column is-5 is-offset-1">
              <h4 class="title is-4" data-config-id="header1">Decrypt a File *</h4>
             
              <label>Private Key</label>
                <div class="field ">
                  <div class="control is-expanded">
                    <textarea v-model = "obDecrypt.privateKey" rows="3" style = "min-height:60px" class="input"  placeholder="Private key" required="required"></textarea>
                  </div>
                </div>
                Select the encrypted cipher
                <input type = "file" class = "input"   @change="decryptGetCipher(event)"  />

                Select the encrypted file
                <input type = "file" class = "input"   @change="decryptGetFile(event)"  />


                <div class="field">
                  <div class="control">
                    <button @click = "decrypt" class="button is-primary is-fullwidth" data-config-id="signin">Decrypt and Download</button>
                  </div>
                </div>
               <p>* Note: this service only decrypts .pxg files generated using this service or the Desktop App. A cipher .JSON file is required.</p>
            </div>
            <div class="column is-6">
              <figure class="image is-128x128"><img class="is-rounded" src="img/undraw_secure_data_0rwp.svg" alt=""></figure>              
              <!-- <h4 class="title is-spaced is-4" data-config-id="header2">Verify a Signature</h4> -->
              <p class="subtitle" data-config-id="description">
                <a href = "https://en.wikipedia.org/wiki/Advanced_Encryption_Standard" target = "_blank">Simple decryption.</a>
                <br/><br/>
                How it works:
                <ul>
                  <li>• Select the encrypted file and the cipher created during encryption.</li>
                  <li>• Your private key decrypts cipher and extracts the AES Key that encrypted the file.</li>
                  <li>• The AES Key is used to decrypt the original file. Details in the cipher file are used to correctly name the file and its original type.</li>
                  <li>• The resultant file is downloaded to your PC.</li>
                 
                  
                </ul>
                
                </p>
 
            </div>
          </div>
        </div>
      </section>


      

       
      <section id = "about" data-section-id="6" data-component-id="29e6_4_05_awz" data-category="how-it-works" class="section">
        <div class="container">
          <div class="columns is-vcentered">
            <div class="column is-6 is-offset-3">
              <h2 class="title" data-config-id="header" style = "text-align:center">Simple Crypto Security</h2>
              <h3 class="title is-6" data-config-id="subheader">Paxxage was created to make crypto procedures simple and universal. Easy gets used.</h3>
              <p   data-config-id="description">Paxxage wraps existing crypto libraries and CLI tools with a simple UI. We make these tools available in the browser and through a multi-platform <a href = "desktop.html">desktop application</a>.  <br/><br/>The tools are <b>completely open source</b>. We encourage you to download, verify the source code, and build your own.</p>
            </div>

          </div>
        </div>
      </section>
      
      
      <section data-section-id="10" data-component-id="29e6_4_07_awz" data-category="how-it-works" class="section">
        <div class="container has-text-centered">
          <h2 class="title is-spaced" data-config-id="header">Paxxage Desktop Features</h2>
          <div class="columns" data-config-id="how_07">
            <div class="column is-3">
              <div class="level">
                <div class="level-item">
                  <figure class="image is-128x128"><img class="is-rounded" src="img/undraw_vault_9cmw.svg" alt=""></figure>
                </div>
              </div>
              <h4 class="title is-4">Key Pair Wallet</h4>
              <p>Manage all of your private and public encryption keys locally. </p>
            </div>
            <div class="column is-3">
              <div class="level">
                <div class="level-item">
                  <figure class="image is-128x128"><img class="is-rounded" src="img/undraw_two_factor_authentication_namy.svg" alt=""></figure>
                </div>
              </div>
              <h4 class="title is-4">Secure Sign-Ins</h4>
              <p>Use Paxxage to sign in to compatible services using private keys. You can also adapt Paxxage for your own secure websites.</p>
            </div>
            <div class="column is-3">
              <div class="level">
                <div class="level-item">
                  <figure class="image is-128x128"><img class="is-rounded" src="img/undraw_authentication_fsn5.svg" alt=""></figure>
                </div>
              </div>
              <h3 class="title is-4">Validate Signatures </h3>
              <p>Validate signatures provided by others. Know that you're talking to the person you think. </p>
            </div>

            <div class="column is-3">
              <div class="level">
                <div class="level-item">
                  <figure class="image is-128x128"><img class="is-rounded" src="img/undraw_emails_6uqr.svg" alt=""></figure>
                </div>
              </div>
              <h3 class="title is-4">Write Encrypted Messages </h3>
              <p>Pre-encrypt your messages to eliminate snopping by service providers or the possibility of interception.</p>
            </div>

          </div>
 

          <div class="columns" data-config-id="how_07">

            <div class="column is-3">
              <div class="level">
                <div class="level-item">
                  <figure class="image is-128x128"><img class="is-rounded" src="img/undraw_security_o890.svg" alt=""></figure>
                </div>
              </div>
              <h4 class="title is-4">Encrypt and Backup</h4>
              <p>Encrypt your files before deploying to Cloud backup. Decrypt files that are shared by your network.</p>
            </div>         

            <div class="column is-3">
              <div class="level">
                <div class="level-item">
                  <figure class="image is-128x128"><img class="is-rounded" src="img/undraw_profile_6l1l.svg" alt=""></figure>
                </div>
              </div>
              <h4 class="title is-4">Manage Anonymous Contacts</h4>
              <p>Manage an inventory of public keys from other known or anonymous contacts. Manage your connections while maintaining anonymity.</p>
            </div>

            <div class="column is-3">
              <div class="level">
                <div class="level-item">
                  <figure class="image is-128x128"><img class="is-rounded" src="img/undraw_progressive_app_m9ms.svg" alt=""></figure>
                </div>
              </div>
              <h4 class="title is-4">Open Source</h4>
              <p>Clone the repository to build the Electron.js Desktop service. Audit and validate all code or adapt to meet your needs.</p>
            </div>         

            <div class="column is-3  ">
              <div class="level">
                <div class="level-item">
                  <figure class="image is-128x128"><img class="is-rounded" src="img/undraw_email_capture_x8kv.svg" alt=""></figure>
                </div>
              </div>
              <h4 class="title is-4">Receive Anonymous Email <a href = "https://mexxage.com" target = "_blank" >Mexxages</a> </h4>
              <p>Receive emails with complete anonymity using the <a href = "https://mexxage.com" target = "_blank">Mexxage</a> service provider.</p>
            </div>

          </div>


          </div><br/>
          <div class="buttons is-centered"><a class="button is-primary" href="desktop.html" data-config-id="primary-action">Get the Desktop App</a></div>
        </div>
      </section>

<footer data-section-id="19" data-component-id="29e6_11_10_awz" data-category="footers" class="footer">
  <div class="container has-text-centered">
    <div class="level">
      <div class="level-item">
        <figure class="image is-48x48"><img src="img/paxxageLogo.svg" alt="" data-config-id="image"></figure>
      </div>
    </div>
    <div class="columns  is-8">

      <div class="column is-3">
        <h2 class="title is-4"  ></h2>
      <img src = "img/nocookies.jpg" scale = "width:100%;height:auto">
        </p>
      </div>


      <div class="column is-3">
        <h2 class="title is-4"  >Cookie Policy</h2>
        <p class="block"  ><b>We do not use cookies.</b><br/>While we anonymously track visit statistics, cookies are not used. We encourage you to block cookies on most sites. 
          
        
        </p>


      </div>
      <div class="column is-6">
        <h2 class="title is-4"><a href="#" data-config-id="brand">Paxxage.com</a></h2>
        <p class="block" data-config-id="description">Paxxage is part of the Symaiotics platform.</p>
        <p class="block" data-config-id="description">info@symaiotics.com</p>
      </div>
    </div>
  
  </div>
</footer>




    </div>
  </div> <!-- End of Vue App-->
  </body>

  <script src="./js/lib/forge.min.js"></script>
  <script src="./js/vue@2.6.11.js"></script>

  <script>
  </script>

<script>

  var app = new Vue({
    el: '#app',
    data: {
      //Test Message
      //message: 'You loaded this page on ' + new Date().toLocaleString(),

      //generate
      obGenerate:{password:"", strength:"4096", private:"", public:""},

      //sign
      obSign:{privateKey:"", password:"", originalValue:"", signature:"", signature64:"",},

      //verify
      obVerify:{publicKey:"", originalValue:"", signature:"",  signature64:"", result:""},

      //encrypt
      obEncrypt:{publicKey:"", file:null, details:{}},
      encryptFiles:[],

      //decrypt
      obDecrypt:{privateKey:"", password:"", file:null, cipher:null},
      decryptFiles:[],

      //Sign In
      obSignIn:{privateKey:"", password:"", originalValue:"", signature:null, alias:null},  
      
      //array and base64 management
      chars: "ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/",
      // Use a lookup table to find the index.
      lookup : new Uint8Array(256),

    },

    mounted()
    {
      for (var i = 0; i < this.chars.length; i++) {
       this.lookup[this.chars.charCodeAt(i)] = i;
      }

    },
    methods: {

      download: function(content, fileName, contentType) {
          var a = document.createElement("a");
          var file = new Blob([content], {type: contentType});
          a.href = URL.createObjectURL(file);
          a.download = fileName;
          a.click();
      },


      generatePassword()
      {
        this.obGenerate.password = this.uuidV4();
      },

      uuidV4()
      {
        var uuid = "", i, random;
        for (i = 0; i < 32; i++) {
          random = Math.random() * 16 | 0;

          if (i == 8 || i == 12 || i == 16 || i == 20) {
            uuid += "-"
          }
          uuid += (i == 12 ? 4 : (i == 16 ? (random & 3 | 8) : random)).toString(16);
        }
        return uuid;

      },

      generate: function()
      {
        var pki = forge.pki;
        var rsa = forge.pki.rsa;

        rsa.generateKeyPair({bits: parseInt(this.obGenerate.strength), workers: 2}, (err, keypair) => {
        var pubStr = forge.pki.publicKeyToPem(keypair.publicKey);
        var privStr = forge.pki.privateKeyToPem(keypair.privateKey);
    
        //Plain Private Key
        if(!this.obGenerate.password.length) //no password
        {
        this.download(pubStr, 'publicKey.pem', 'text/plain');
        this.download(privStr, 'privateKey.pem', 'text/plain');
        }
  
        //Encrypted Private Key
        if(this.obGenerate.password.length && this.obGenerate.password.length >=16) //has password
        {
          var private_e = forge.pki.encryptRsaPrivateKey(keypair.privateKey, this.obGenerate.password);
          this.download(private_e, 'privateKey_e.pem', 'text/plain');
          this.download(pubStr, 'publicKey.pem', 'text/plain');
        }

      //decrypt the key
      //for future users, this is how you decrypt the private key back to PEM format
      // var privateKey = pki.decryptRsaPrivateKey(pem, 'yourpassword');


    });

      //  
      },

      sign: function()
      {

        var pki = forge.pki;
        var rsa = forge.pki.rsa;

        //decrypt the password on the PEM is there is one
        if(this.obSign.privateKey.includes("ENCRYPTED"))
          var privateKey = pki.decryptRsaPrivateKey(this.obSign.privateKey, this.obSign.password);
        else var privateKey = forge.pki.privateKeyFromPem(this.obSign.privateKey);

      // sign data using RSASSA-PSS where PSS uses a SHA-1 hash, a SHA-1 based
      // masking function MGF1, and a 20 byte salt
        var md = forge.md.sha1.create();
        md.update(this.obSign.originalValue, 'utf8');
        var pss = forge.pss.create({
          md: forge.md.sha1.create(),
          mgf: forge.mgf.mgf1.create(forge.md.sha1.create()),
          saltLength: 20
          // optionally pass 'prng' with a custom PRNG implementation
          // optionalls pass 'salt' with a forge.util.ByteBuffer w/custom salt
        });
        this.obSign.signature = privateKey.sign(md, pss);
        this.obSign.signature64 = forge.util.encode64(this.obSign.signature) //use the signature base64 version https://github.com/digitalbazaar/forge/issues/301


        var signatureFile = {
          originalValue:this.obSign.originalValue, 
          // signature:this.obSign.signature, 
          signature64:this.obSign.signature64};

        this.download(JSON.stringify(signatureFile), "signature.json", "text/plain");

      },

      verify: function()
      {
        var publicKey = forge.pki.publicKeyFromPem(this.obVerify.publicKey);

        //use the signature base64 version https://github.com/digitalbazaar/forge/issues/301
         var signature = forge.util.decode64(this.obVerify.signature64);

        var md = forge.md.sha1.create();
        md.update(this.obVerify.originalValue, 'utf8');

        var pss = forge.pss.create({
        md: forge.md.sha1.create(),
        mgf: forge.mgf.mgf1.create(forge.md.sha1.create()),
        saltLength: 20
        // optionally pass 'prng' with a custom PRNG implementation
      });

      this.obVerify.result = publicKey.verify(md.digest().getBytes(), signature, pss);
},

    encryptGetFile(event)
    {
      var input = event.target;
      var reader = new FileReader();

      console.log(input.files[0])
      console.log(input.files[0].name)
      this.obEncrypt.details.name = input.files[0].name;
      this.obEncrypt.details.size = input.files[0].size;
      this.obEncrypt.details.lastModified = input.files[0].lastModified;
      this.obEncrypt.details.type = input.files[0].type;

      console.log(this.obEncrypt.details)
      // Read file into memory as Binary
      reader.readAsArrayBuffer  (input.files[0]);

      // Handle progress, success, and errors
      //reader.onprogress = updateProgress;
      reader.onload = this.encryptLoadFile;
      //reader.onerror = errorHandler;

    },

    encryptLoadFile(evt)
    {
          // Obtain the read file data
          //var b = evt.target.result;
          console.log(evt.target)
          this.obEncrypt.file = evt.target.result;

          //Proof the decoding works
          var encoded = this.encode(this.obEncrypt.file);
          var decoded = this.decode(encoded);
 
    },

    encrypt: function () 
    {
      //256 bit
      var key = forge.random.getBytesSync(32);
      var iv = forge.random.getBytesSync(32);

      var encoded = this.encode(this.obEncrypt.file);

      // encrypt
      var cipher = forge.cipher.createCipher('AES-CBC', key);
      cipher.start({iv: iv});
      cipher.update(forge.util.createBuffer(encoded));
      cipher.finish();

      // base64-encode again
      var encrypted = cipher.output.getBytes(); //I am a string
      var encrypted64 = forge.util.encode64(encrypted); //I am base64 
      var i1 = this.decode(encrypted64); //i am binary
      
      encrypted = forge.util.decode64(encrypted64);

      // decrypt
      var decipher = forge.cipher.createDecipher('AES-CBC', key);
      decipher.start({iv: iv});
      decipher.update(forge.util.createBuffer(encrypted));
      decipher.finish();

      var decrypted64 = decipher.output.getBytes();

      var decode = this.decode(decrypted64);
      console.log("decode", decode);

       var publicKey = forge.pki.publicKeyFromPem(this.obEncrypt.publicKey);

      // //encrypt the AES Key to be recreated later
       var encryptedCipher = publicKey.encrypt(JSON.stringify({key:forge.util.bytesToHex(key), iv:forge.util.bytesToHex(iv)}));
       var encryptedDetails = publicKey.encrypt(JSON.stringify(this.obEncrypt.details));
     
       var encFilename = this.uuidV4();

      //download the encrypted.json
      this.download(JSON.stringify({encryptedCipher:encryptedCipher, encryptedDetails:encryptedDetails}), encFilename+"-cipher.json", "text/plain")
      this.download( (i1), encFilename + "-file.pxg", "application/octet-stream")

    },


    decryptGetFile(event)
    {
      var input = event.target;
      var reader = new FileReader();

      // Read file into memory as Buffer
      reader.readAsArrayBuffer (input.files[0] );

      // Handle progress, success, and errors
      //reader.onprogress = updateProgress;
      reader.onload = this.decryptLoadFile;
      //reader.onerror = errorHandler;

    },

    decryptLoadFile(evt)
    { 
          this.obDecrypt.file = evt.target.result;
         
    },


    decryptGetCipher(event)
    {
      var input = event.target;
      var reader = new FileReader();

      // Read file into memory as Text
      reader.readAsText (input.files[0] );

      // Handle progress, success, and errors
      //reader.onprogress = updateProgress;
      reader.onload = this.decryptLoadCipher;
      //reader.onerror = errorHandler;

    },

    decryptLoadCipher(evt)
    { 
          this.obDecrypt.cipher = JSON.parse(evt.target.result);
    },



    decrypt: function () 
    {
     
      var privateKey = forge.pki.privateKeyFromPem(this.obDecrypt.privateKey);
      var decryptedCipher = JSON.parse(privateKey.decrypt(this.obDecrypt.cipher.encryptedCipher));
      console.log("decryptedCipher", decryptedCipher);
     
      var decryptedDetails = JSON.parse(privateKey.decrypt(this.obDecrypt.cipher.encryptedDetails));
      console.log("decryptedDetails", decryptedDetails);
      
    var i1 = this.encode(this.obDecrypt.file)
    var encrypted64 = forge.util.decode64(i1); //I am base64 

    // decrypt
    var decipher = forge.cipher.createDecipher('AES-CBC', forge.util.hexToBytes(decryptedCipher.key));
    decipher.start({iv: forge.util.hexToBytes(decryptedCipher.iv)});
    decipher.update(forge.util.createBuffer(encrypted64));
    decipher.finish();

    var decrypted64 = decipher.output.getBytes();
    var decode = this.decode(decrypted64);


    this.download((decode), decryptedDetails.name, decryptedDetails.type)

    },


    

      copyValue: function(object)
      {
        var textarea = document.createElement('textarea');
      textarea.textContent = object;
      document.body.appendChild(textarea);

      var selection = document.getSelection();
      var range = document.createRange();
    //  range.selectNodeContents(textarea);
      range.selectNode(textarea);
      selection.removeAllRanges();
      selection.addRange(range);

      console.log('copy success', document.execCommand('copy'));
      selection.removeAllRanges();

      document.body.removeChild(textarea);



      },

  
 encode : function(arraybuffer) {
    var bytes = new Uint8Array(arraybuffer),
    i, len = bytes.length, base64 = "";

    for (i = 0; i < len; i+=3) {
      base64 += this.chars[bytes[i] >> 2];
      base64 += this.chars[((bytes[i] & 3) << 4) | (bytes[i + 1] >> 4)];
      base64 += this.chars[((bytes[i + 1] & 15) << 2) | (bytes[i + 2] >> 6)];
      base64 += this.chars[bytes[i + 2] & 63];
    }

    if ((len % 3) === 2) {
      base64 = base64.substring(0, base64.length - 1) + "=";
    } else if (len % 3 === 1) {
      base64 = base64.substring(0, base64.length - 2) + "==";
    }

    return base64;
  },

  decode:  function(base64) {
    var bufferLength = base64.length * 0.75,
    len = base64.length, i, p = 0,
    encoded1, encoded2, encoded3, encoded4;

    if (base64[base64.length - 1] === "=") {
      bufferLength--;
      if (base64[base64.length - 2] === "=") {
        bufferLength--;
      }
    }

    var arraybuffer = new ArrayBuffer(bufferLength),
    bytes = new Uint8Array(arraybuffer);

    for (i = 0; i < len; i+=4) {
      encoded1 = this.lookup[base64.charCodeAt(i)];
      encoded2 = this.lookup[base64.charCodeAt(i+1)];
      encoded3 = this.lookup[base64.charCodeAt(i+2)];
      encoded4 = this.lookup[base64.charCodeAt(i+3)];

      bytes[p++] = (encoded1 << 2) | (encoded2 >> 4);
      bytes[p++] = ((encoded2 & 15) << 4) | (encoded3 >> 2);
      bytes[p++] = ((encoded3 & 3) << 6) | (encoded4 & 63);
    }

    return arraybuffer;
  },


//for alternate use cases
//      dataURItoBlob: function(dataURI) {
//   // convert base64 to raw binary data held in a string
//   // doesn't handle URLEncoded DataURIs - see SO answer #6850276 for code that does this
//   var byteString = atob(dataURI.split(',')[1]);

//   // separate out the mime component
//   var mimeString = dataURI.split(',')[0].split(':')[1].split(';')[0]

//   // write the bytes of the string to an ArrayBuffer
//   var ab = new ArrayBuffer(byteString.length);

//   // create a view into the buffer
//   var ia = new Uint8Array(ab);

//   // set the bytes of the buffer to the correct values
//   for (var i = 0; i < byteString.length; i++) {
//       ia[i] = byteString.charCodeAt(i);
//   }

//   // write the ArrayBuffer to a blob, and you're done
//   var blob = new Blob([ab], {type: mimeString});
//   return blob;

// },
 

  }

  })

</script>
  
  <style>
a{
  
color:#F3904F
}

.button.is-primary
{
background-color:#F3904F;
}
 

.splash-back
{
 background: #F3904F;  /* fallback for old browsers */
background: -webkit-linear-gradient(to right, #3B4371, #F3904F);  /* Chrome 10-25, Safari 5.1-6 */
background: linear-gradient(to right, #3B4371, #F3904F); /* W3C, IE 10+/ Edge, Firefox 16+, Chrome 26+, Opera 12+, Safari 7+ */


}
 
.hero
 {
  color:white;

  }

.hero .title{
   color:white;
   font-size:3em
 }

 .hero  .subtitle

 {
   color:white;
 }
  



  </style>
</html>

